
\newcommand{\rot}[1]{\makebox[1em][l]{\rotatebox{45}{#1}}}

\newcommand{\full}{$\CIRCLE$}
\newcommand{\half}{$\LEFTcircle$}
\newcommand{\empt}{$\Circle$}

\newcommand{\hist}[1]{\includegraphics[height=1em, width=8em, trim=1em 1em 1em 1em, clip]{compression-#1.pdf}}

\newcommand*{\pie}[1]{\begin{tikzpicture}[scale=0.15]%
    \draw (0,0) circle (1);
    \fill[fill opacity=1,fill=black] (0,0) -- (90:1) arc (90:90-#1*3.6:1) -- cycle;
    \end{tikzpicture}}

\begin{table*}
    \centering
    \caption{Customization practices broken down by command. We present a selection of common commands and display the percentage of each command's involvement in a customization practice with a pie chart symbol, if it is more than \per{1}. The compression ratio plots are log-log histograms, with the red line marking compression ratio 1.}
    \vspace{1em}
    \label{tab:practices-by-command}
\begin{adjustbox}{width=\columnwidth,center}
\begin{tabular}{llr|ccc|cccc|cc|c}
& & \multicolumn{1}{r}{\#} & \multicolumn{1}{c}{\rot{Nicknaming Commands}} & \multicolumn{1}{c}{\rot{Abbreviating Subcommands}} & \multicolumn{1}{c}{\rot{Bookmarking Locations}} & \multicolumn{1}{c}{\rot{Substituting Commands}} & \multicolumn{1}{c}{\rot{Overriding Defaults}} & \multicolumn{1}{c}{\rot{Colorizing Output}} & \multicolumn{1}{c}{\rot{Elevating Privilege}} & \multicolumn{1}{c}{\rot{Transforming Data}} & \multicolumn{1}{c}{\rot{Chaining Subcommands}} & Compression \\
\midrule
\multicolumn{2}{l}{Version Control} & & & & & & & & & & & \\
&           \texttt{git} &  \num{315841} &          \pie{3.44} &              \pie{36.11} &            \pie{1.84} &                       &                     &        \pie{1.26} &                     &                   &           \pie{3.82} &           \hist{git} \\
&            \texttt{hg} &    \num{2799} &          \pie{2.47} &              \pie{44.52} &            \pie{2.22} &           \pie{22.15} &                     &        \pie{1.68} &                     &                   &           \pie{3.43} &            \hist{hg} \\
\midrule
\multicolumn{2}{l}{System Tools} & & & & & & & & & & & \\
&            \texttt{ls} &  \num{268423} &           \pie{2.2} &                          &                       &            \pie{3.41} &         \pie{28.08} &       \pie{29.56} &                     &                   &                      &            \hist{ls} \\
&            \texttt{cd} &  \num{164164} &          \pie{1.07} &                          &           \pie{45.61} &            \pie{1.78} &                     &                   &                     &                   &                      &            \hist{cd} \\
&          \texttt{grep} &  \num{144606} &                     &                          &            \pie{1.86} &            \pie{2.39} &         \pie{67.06} &        \pie{70.6} &                     &       \pie{25.48} &                      &          \hist{grep} \\
&            \texttt{rm} &   \num{26131} &                     &                          &           \pie{19.67} &             \pie{9.3} &         \pie{49.45} &                   &          \pie{8.43} &                   &                      &            \hist{rm} \\
&          \texttt{tmux} &   \num{22821} &           \pie{5.6} &                          &            \pie{4.37} &             \pie{1.7} &         \pie{18.52} &       \pie{26.11} &                     &                   &                      &          \hist{tmux} \\
&            \texttt{cp} &   \num{18628} &          \pie{1.14} &                          &           \pie{13.28} &            \pie{3.24} &         \pie{74.37} &                   &           \pie{1.8} &                   &                      &            \hist{cp} \\
&            \texttt{mv} &   \num{14897} &          \pie{1.91} &                          &             \pie{5.1} &            \pie{3.13} &         \pie{81.23} &                   &          \pie{1.01} &                   &                      &            \hist{mv} \\
&            \texttt{du} &   \num{12480} &                     &                          &            \pie{3.13} &            \pie{3.91} &         \pie{45.45} &        \pie{2.01} &          \pie{1.75} &                   &                      &            \hist{du} \\
&          \texttt{sort} &   \num{10802} &                     &                          &                       &            \pie{1.46} &                     &                   &                     &       \pie{95.97} &                      &          \hist{sort} \\
&         \texttt{mkdir} &   \num{10351} &         \pie{10.11} &                          &            \pie{4.37} &            \pie{2.02} &         \pie{57.72} &                   &                     &                   &                      &         \hist{mkdir} \\
&            \texttt{df} &   \num{10266} &                     &                          &                       &            \pie{4.41} &         \pie{82.09} &                   &                     &                   &                      &            \hist{df} \\
&          \texttt{diff} &    \num{4697} &                     &                          &                       &           \pie{46.18} &         \pie{32.13} &       \pie{91.95} &                     &                   &                      &          \hist{diff} \\
\midrule
\multicolumn{2}{l}{Text Editors} & & & & & & & & & & & \\
&           \texttt{vim} &   \num{99521} &          \pie{8.68} &                          &           \pie{29.12} &           \pie{50.52} &          \pie{1.68} &                   &          \pie{3.41} &                   &                      &           \hist{vim} \\
&         \texttt{emacs} &   \num{12990} &         \pie{11.74} &                          &            \pie{8.31} &           \pie{18.41} &         \pie{12.04} &         \pie{1.8} &          \pie{2.03} &                   &                      &         \hist{emacs} \\
&           \texttt{sed} &    \num{7545} &                     &                          &           \pie{20.32} &           \pie{14.04} &          \pie{2.03} &        \pie{2.68} &                     &       \pie{70.01} &                      &           \hist{sed} \\
&          \texttt{subl} &    \num{5030} &          \pie{10.6} &                          &           \pie{31.49} &            \pie{44.0} &          \pie{1.39} &                   &          \pie{1.93} &        \pie{1.15} &                      &          \hist{subl} \\
&          \texttt{nano} &    \num{4030} &          \pie{6.67} &                          &           \pie{36.97} &           \pie{11.17} &         \pie{16.63} &                   &         \pie{16.72} &                   &                      &          \hist{nano} \\
\midrule
\multicolumn{2}{l}{Infrastructure} & & & & & & & & & & & \\
&        \texttt{docker} &   \num{39111} &         \pie{16.36} &              \pie{23.87} &           \pie{11.48} &                       &                     &                   &          \pie{4.19} &                   &           \pie{2.75} &        \hist{docker} \\
&       \texttt{kubectl} &   \num{12610} &         \pie{20.37} &              \pie{13.94} &            \pie{2.31} &                       &          \pie{1.03} &                   &                     &                   &                      &       \hist{kubectl} \\
&       \texttt{vagrant} &    \num{6847} &         \pie{10.79} &              \pie{63.27} &            \pie{1.04} &                       &                     &                   &                     &                   &            \pie{4.7} &       \hist{vagrant} \\
\midrule
\multicolumn{2}{l}{Networking} & & & & & & & & & & & \\
&           \texttt{ssh} &   \num{32573} &                     &                          &           \pie{65.43} &             \pie{1.9} &          \pie{3.86} &        \pie{1.95} &                     &                   &                      &           \hist{ssh} \\
&          \texttt{curl} &   \num{10558} &                     &                          &           \pie{80.24} &            \pie{4.23} &          \pie{3.06} &                   &                     &                   &                      &          \hist{curl} \\
&          \texttt{wget} &    \num{3937} &           \pie{1.3} &                          &           \pie{28.63} &            \pie{7.47} &         \pie{38.96} &                   &                     &                   &                      &          \hist{wget} \\
\midrule
\multicolumn{2}{l}{Package Managers} & & & & & & & & & & & \\
&          \texttt{apt} &    \num{17632} &          \pie{1.28} &              \pie{58.35} &                       &            \pie{3.06} &          \pie{4.37} &                   &         \pie{75.24} &                   &          \pie{17.04} &           \hist{apt} \\
&        \texttt{pacman} &   \num{14798} &          \pie{1.33} &              \pie{67.02} &                       &            \pie{4.09} &          \pie{7.57} &        \pie{7.12} &         \pie{63.02} &                   &           \pie{1.19} &        \hist{pacman} \\
&          \texttt{brew} &    \num{8555} &          \pie{3.12} &              \pie{32.24} &                       &            \pie{1.48} &                     &                   &          \pie{1.68} &                   &          \pie{33.77} &          \hist{brew} \\
\bottomrule
\end{tabular}
\end{adjustbox}
\end{table*}
