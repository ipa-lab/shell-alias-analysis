\section{Analysis}

\input{tables/top-summary.tex}

\Cref{tab:top-summary} shows the most common alias names, commands, and arguments appearing in alias definitions.
The most common alias name we found is \texttt{ls}, appearing a total number of \num{83782} times, which is \per{3.8} of all alias definitions.
Note that this is \texttt{ls} as an \emph{alias name}, a redefinition of the \texttt{ls} \emph{command}, which appears \num{260156} times (\per{10.27}).
This is a bit less often than \texttt{git}, the most common command, which appears in \num{327786} aliases (\per{12.93}).
The most common argument, across all commands, is \texttt{--color=auto}, appearing \num{153931} times (\per{4.24})

\input{tables/command-summary.tex}
\input{table-use-cases.tex} % TODO: update

Looking at each part of an alias definition in isolation can only get us so far, as arguments only gain meaning in conjunction with commands and alias names can be identical between users, referring to the same command/argument combination, or indeed can overlap, meaning the same alias name is used differently by different users.
\Cref{tab:command-summary} gives a more informative view for the top two commands, \texttt{git} and \texttt{ls}, showing us the top arguments given with each and the most common alias names by which the command/argument combinations are referred to.
Here we can already identify some of the typical alias use cases.
Looking at \texttt{ls}, we find that aliases are used
to redefine the command with a default argument (\verb|alias ls="ls --color=auto"|);
to shorten a common invocation (\verb|alias ll="ls -alF"|);
and to correct a spelling mistake (\verb|alias sl=ls|).
We also notice that in the case of \texttt{git}, most aliases are used for shortening \texttt{git} subcommand invocations (e.g. \verb|alias gd="git diff"|).

To capture the range of patterns and use cases for which aliases are defined, we applied inductive coding methods on a selected cross-section of the dataset.
Inductive coding is used when conducting exploratory research without prior expectations on themes in the data \cite{thomas:06}.
It is an iterative process between theoretical sampling and comparing data within emerging themes \cite{dey:03}.
We looked at 1381 alias definitions derived in a similar way as \Cref{tab:command-summary}, i.e. the most common aliases for the most common arguments for the most common commands.
In addition, we took a random sample of 200 alias definitions that each occur only once in the dataset to represent the long tail.
Coding was then performed independently by two authors, who labelled each alias definition in the cross-section with descriptive tags, taking the semantics of the commands into account as much as possible.\footnote{The website \url{https://explainshell.com} has been an indispensable resource.}
After a first iteration, the coders compared their labels, consolidating different naming conventions.
In consecutive iterations, the coders identified ways of formalizing the emerged categories, i.e. constructing automated mechanisms for classifying alias definitions as belonging into a certain category or not.
The discussion of the formalizations additionally served to establish a better shared understanding.
Ultimately, the coders reached a saturation point at which further coding and analysis did not lead to further insights.

%We could identify \TODO customization practices involving aliases:

\TODO

%\Cref{tab:use-cases} breaks down the customization practices by command, presenting a selection of commands with a quantitative overview about the kinds of aliases each command is commonly used in.

%We will now discuss each of the \TODO customization practices in more detail.


%\input{summary_stats}

\subsection{Autocorrect}

Aliases can be used to correct common misspellings of commands, like typing \verb|got| instead of \verb|git|.
While it is easy for the human eye to determine instances of these typographical errors, it is not as straightforward to formalize all different cases and to distinguish them from regular command shortcuts.
We opt for a conservative criterion (potentially underestimating the true extent of the phenomenon) that looks only at aliases whose names are of the same length as their aliased commands, with a string distance measure above an empirically determined threshold.
We surveyed and experimented with different distance measures~\cite{navarro:01} and decided on using the Damerau-Levenshtein algorithm~\cite{damerau:64}.
It is a robust measure that in addition to tracking the number of insertions, deletions, and substitutions between two strings, also captures the transposition of two characters, a common occurrence in misspelled commands.
We computed the distance measure for all applicable aliases, and determined empirically that a distance measure of 2 seems like a good threshold to decide whether or not an alias corrects a misspelling.
We found \num{9195} aliases (\per{0.42}) that serve as autocorrect rules, most commonly involving transposition (\verb|grpe| $\rightarrow$ \verb|grep|), case-sensitivity (\verb|Jupyter| $\rightarrow$ \verb|jupyter|), localization (\verb|pluralise| $\rightarrow$ \verb|pluralize|), and punctuation (\verb|docker-build| $\rightarrow$ \verb|docker_build|).

On the flip side, aliases are also used to disable autocorrect mechanisms.
The Z shell has built-in spelling correction, which can be selectively disabled using the \verb|nocorrect| command.
There are \num{7326} aliases (\per{0.33}) in our dataset disabling Z shell autocorrection for certain commands, most commonly the filesystem commands \verb|mv|, \verb|mkdir|, \verb|cp| and \verb|rm|.

\subsection{Pipelines}

The most interesting shell operator is certainly the pipe (\verb`|`), since it creates an interface between two otherwise separate programs.
The pipe embodies the Unix philosophy of small tools doing one thing well, which can be connected together to accomplish more complex tasks.
\Cref{fig:flow} shows a flow diagram of the top 250 pipelines with three commands that make up at least \per{10} of one participating command's usage.

\begin{figure*}[h]
	\centering    
	\includegraphics[width=0.9\linewidth]{figures/flow_250.png}
	\caption{Flow diagram for top 3-command pipelines}
	\label{fig:flow}
\end{figure*}


%\input{default_arguments}

%\input{autocorrect}

%\input{compression}

%\input{chaining}

%\input{safety}

%\input{bookmarks}

% for potential related work (including method), google 'usability smells'
% e.g. https://www.sciencedirect.com/science/article/pii/S1071581916301215
%      https://link.springer.com/chapter/10.1007/978-3-662-44811-3_13